<html>
<head>
  <title>Reality Editor Starter App</title>
  <link rel="stylesheet" type="text/css" href="index.css">   
  <script src="index.js" defer></script>
</head>
<body>

<div id='app'>

  <div id='header'>
    <div id='title'>
      <img src='resources/logo.svg' id='logo'></img>
      Reality Editor
    </div>
    <div id='subtitle'>STARTER APP</div>
  </div>

  <div id='contents'>
    <div class='deviceGroup' id='lego'>
      LEGO WEDO 2.0
      <br />
      <div id='buttonBLE' class='button green two'>SEARCHING FOR WEDO</div>
     <!-- <div id='buttonClick' class='button white two'>WAITING FOR WEDO</div>-->
      <br />
      <div id='wedoButtons'>
        <div id = "lego1" class='button green inactive'>WEDO 1</div>
        <div id = "lego2" class='button green inactive'>WEDO 2</div>
        <div id = "lego3" class='button green inactive'>WEDO 3</div>
        <div id = "lego4" class='button green inactive'>WEDO 4</div>
        <br />
     <a href="resources/printoutWedo.pdf" target="_blank" download><div id = "lego1p" class='button blue inactive clickAble four'>PRINT</div></a>
        <!--  <a href="resources/printoutWedo.pdf" target="_blank"><div id = "lego2p" class='button blue inactive clickAble'>PRINT</div></a>
       <a href="resources/printoutWedo.pdf" target="_blank"><div id = "lego3p" class='button blue inactive clickAble'>PRINT</div></a>
       <a href="resources/printoutWedo.pdf" target="_blank"><div id = "lego4p" class='button blue inactive clickAble'>PRINT</div></a>
    -->
      </div>

    </div>
    <div class='deviceGroup' id='philips'>
      PHILIPS HUE LIGHTS
      <br />
      <!--<div class='button white active two leftText inputText'><input id="ipInput" type='input' placeholder='HUE HUB IP'></input></div> -->
      <div id='buttonConnect' class='button green active two clickAble'>SEARCHING FOR HUE BRIDGE</div>
      <!--<div id='status' class='button white active two'></div>-->
      <br />
      <div id='hueButtons'>
        <div id = "light1" class='button green inactive'>Light 1</div>
        <div id = "light2" class='button green inactive'>Light 2</div>
        <div id = "light3" class='button green inactive'>Light 3</div>
        <div id = "light4" class='button green inactive'>Light 4</div>
        <br />
        <a href="resources/printoutHue1.pdf" target="_blank" download><div id = "light1p" class='button blue inactive'>PRINT</div></a>
        <a href="resources/printoutHue2.pdf" target="_blank" download><div id = "light2p"  class='button blue inactive'>PRINT</div></a>
        <a href="resources/printoutHue3.pdf" target="_blank" download><div id = "light3p"  class='button blue inactive'>PRINT</div></a>
        <a href="resources/printoutHue4.pdf" target="_blank" download><div id = "light4p"  class='button blue inactive'>PRINT</div></a>
      </div>
    </div>
  </div>

</div>


<script>

    (function(exports) {
    // In renderer process (web page).
    const {ipcRenderer} = require('electron');
    // console.log(ipcRenderer.sendSync('synchronous-message', 'ping')) // prints "pong"
    var app = ipcRenderer;



    var buttonBLE = document.getElementById('buttonBLE');
var legos = {
    lego1: document.getElementById('lego1'),
    lego2: document.getElementById('lego2'),
    lego3: document.getElementById('lego3'),
    lego4: document.getElementById('lego4'),
    lego1p: document.getElementById('lego1p'),
    lego2p: document.getElementById('lego2p'),
    lego3p: document.getElementById('lego3p'),
    lego4p: document.getElementById('lego4p')
};
        var buttonConnect = document.getElementById('buttonConnect');
        var hues = {
            light1: document.getElementById('light1'),
            light2: document.getElementById('light2'),
            light3: document.getElementById('light3'),
            light4: document.getElementById('light4'),
            light1p: document.getElementById('light1p'),
            light2p: document.getElementById('light2p'),
            light3p: document.getElementById('light3p'),
            light4p: document.getElementById('light4p')
        };



    app.on('msg', function (event, msg,arg) {

        if(msg === "wedoOff"){
            if(arg in legos){
                legos[arg].classList.remove('active');
                legos[arg].classList.add('inactive');
            }
        }
        if(msg === "wedoOn"){
            if(arg in legos){
                legos[arg].classList.remove('inactive');
                legos[arg].classList.add('active');

            }
            legos["lego1p"].classList.remove('inactive');
            legos["lego1p"].classList.add('active');
        }

        if(msg === "wedoBLE"){

            console.log(msg,arg); // prints "pong"

            if(arg === "off"){
                if (buttonBLE.classList.contains('green')) {
                    buttonBLE.classList.remove('green');
                    buttonBLE.classList.add('red');
                    buttonBLE.innerText = "BLE IS OFF";
                }

                for(var key in legos){
                    legos[key].classList.remove('active');
                    legos[key].classList.add('inactive');
                }

                legos["lego1p"].classList.remove('active');
                legos["lego1p"].classList.add('inactive');
            }
            if(arg === "on"){
                if (buttonBLE.classList.contains('red')) {
                    buttonBLE.classList.remove('red');
                    buttonBLE.classList.add('green');
                    buttonBLE.innerText = "SEARCHING FOR WEDO";
                }
            }
        }

        if(msg == "hueStatus"){

            if(arg === "on"){
                    buttonConnect.classList.remove('red');
                    buttonConnect.classList.add('green');
                    buttonConnect.innerText = "FOUND HUE BRIDGE";
            }
        }

        if(msg === "hueOff"){
            if(arg in hues){
                hues[arg].classList.remove('active');
                hues[arg].classList.add('inactive');
                hues[arg+"p"].classList.remove('active');
                hues[arg+"p"].classList.add('inactive');
            }
        }
        if(msg === "hueOn"){
            if(arg in hues){
                hues[arg].classList.remove('inactive');
                hues[arg].classList.add('active');
                hues[arg+"p"].classList.remove('inactive');
                hues[arg+"p"].classList.add('active');
            }
        }

    });

    setInterval(function () {
        // Send async message to main process
        //  app.send('msg', 'msg','ping')
    }, 100);
    }(window));



</script>

</body>
</html>